package Main;

import javax.swing.*;
import javax.swing.event.CaretListener;
import javax.swing.event.CaretEvent;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Main {
    
    final static JComboBox<String> Operator1 = new JComboBox<String>(new String[] {"","Дуб","Дубовые доски","Булыжник","Палка"});
    final static JComboBox<String> Operator2 = new JComboBox<String>(new String[] {"","Дуб","Дубовые доски","Булыжник","Палка"});
    final static JComboBox<String> Operator3 = new JComboBox<String>(new String[] {"","Дуб","Дубовые доски","Булыжник","Палка"});
    final static JComboBox<String> Operator4 = new JComboBox<String>(new String[] {"","Дуб","Дубовые доски","Булыжник","Палка"});
    final static JComboBox<String> Operator5 = new JComboBox<String>(new String[] {"","Дуб","Дубовые доски","Булыжник","Палка"});
    final static JComboBox<String> Operator6 = new JComboBox<String>(new String[] {"","Дуб","Дубовые доски","Булыжник","Палка"});
    final static JComboBox<String> Operator7 = new JComboBox<String>(new String[] {"","Дуб","Дубовые доски","Булыжник","Палка"});
    final static JComboBox<String> Operator8 = new JComboBox<String>(new String[] {"","Дуб","Дубовые доски","Булыжник","Палка"});
    final static JComboBox<String> Operator9 = new JComboBox<String>(new String[] {"","Дуб","Дубовые доски","Булыжник","Палка"});
    final static JCheckBox Change = new JCheckBox("Autocraft");
    final static JTextField text = new JTextField();
    final static JLabel Result = new JLabel("");
    
    // Массив всех операторов для удобной проверки
    static JComboBox<String>[] allOperators;
    
    // Статический блок инициализации для массива
    static {
        allOperators = new JComboBox[] {
            Operator1, Operator2, Operator3, Operator4, Operator5, 
            Operator6, Operator7, Operator8, Operator9
        };
    }
    
    // Общий слушатель для всех JComboBox
    private static ActionListener comboBoxListener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            checkAndUpdateResult();
        }
    };
    
    
    public static void Disign(JFrame frame) {
        frame.setLayout(new GridLayout(3, 5));
        frame.add(Operator1);
        frame.add(Operator2);
        frame.add(Operator3);
         frame.add(new JLabel(""));
         frame.add(Change);
        frame.add(Operator4);
        frame.add(Operator5);
        frame.add(Operator6);
        frame.add(new JLabel("===>"));
        frame.add(Result);
        frame.add(Operator7);
        frame.add(Operator8);
        frame.add(Operator9);
        frame.add(new JLabel(""));
        frame.add(text);
    }
    
    // Метод для проверки и обновления результата
    private static void checkAndUpdateResult() {
        if (Wood()) {
            Result.setText("Дубовая доска (x4)");
        } else if (Sticks()) {
            Result.setText("Палка (x2)");
        } else if (Pickaxe()) {
            Result.setText("Каменная кирка");
        } else {
            Result.setText("");
        }
    }
    
    // Метод для проверки, пустой ли ComboBox
    private static boolean isEmpty(JComboBox<String> comboBox) {
        String selected = (String) comboBox.getSelectedItem();
        return selected != null && selected.equals("");
    }
    
    // Метод для проверки, дуб ли ComboBox
    private static boolean isDub(JComboBox<String> comboBox) {
        String selected = (String) comboBox.getSelectedItem();
        return selected != null && selected.equals("Дуб");
    }
    
    // Метод для проверки, Дубовые доски ли ComboBox
    private static boolean isDubWood(JComboBox<String> comboBox) {
        String selected = (String) comboBox.getSelectedItem();
        return selected != null && selected.equals("Дубовые доски");
    }
    
    private static int CountofEmpty() {
        int k = 0;
        for (int i = 0; i < allOperators.length; i++) {
            if (isEmpty(allOperators[i])) {
                k++;
            }
        }
        return k;
    }
    
    private static boolean Wood() {
        int k = 0;
        for (int i = 0; i < allOperators.length; i++) {
            if (isDub(allOperators[i])) {
                k++;
            }
        }
        return k == 1 && CountofEmpty() == 8;
    }
    
    private static boolean Sticks() {
        int k = CountofEmpty();
        for (int i = 0; i < allOperators.length - 3; i++) {
            if (isDubWood(allOperators[i]) && isDubWood(allOperators[i + 3]) && k == 7) {
                return true;
            }
        }
        return false;
    }
    
    private static boolean Pickaxe() {
        if ((String) allOperators[0].getSelectedItem() == "Булыжник" &&
            (String) allOperators[1].getSelectedItem() == "Булыжник" &&
            (String) allOperators[2].getSelectedItem() == "Булыжник" &&
            (String) allOperators[4].getSelectedItem() == "Палка" &&
            (String) allOperators[7].getSelectedItem() == "Палка") {
            return true;
        }
        return false;
    }
    
    public static void AutoPixel() {
    	Operator1.setSelectedIndex(3);
    	Operator2.setSelectedIndex(3);
    	Operator3.setSelectedIndex(3);
    	Operator5.setSelectedIndex(4);
    	Operator8.setSelectedIndex(4);
    }
    
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(1000, 600);
        frame.setLocation(0, 0);
        frame.setTitle("Верстак");
        
        Disign(frame);
        
        for (JComboBox<String> comboBox : allOperators) {
            comboBox.addActionListener(comboBoxListener);
        }
        // Добавляем слушатель для Checkbox (автокрафт)
        Change.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // Можно добавить дополнительную логику при включении/выключении автокрафта
                if (Change.isSelected()) {
                	AutoPixel();
                }
            }
        });
        
       text.addCaretListener(new CaretListener() {
    	   @Override
    	   public void caretUpdate(CaretEvent arg0) {
    		   if ("Clear".equals(text.getText())) {
    			   for (int i = 0; i < allOperators.length ; i++) {
    				   allOperators[i].setSelectedIndex(0);
    			   }
    		   }
    	   }
       });
        
        frame.setVisible(true);
    }
}